<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" th:attr="data-api-base=${apiBase}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${appName}">Todo Summarized</title>
    <link rel="icon" type="image/svg+xml" th:href="@{/images/favicon.svg}">
    <link rel="icon" type="image/x-icon" th:href="@{/images/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<!-- Navigation -->
<nav class="landing-nav">
    <div class="landing-nav-container">
        <a href="/" class="landing-logo">
                <span class="landing-logo-icon">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                </span>
            <span th:text="${appName}">Todo Summarized</span>
        </a>
        <div class="landing-nav-links">
            <button class="btn btn-ghost" id="navLoginBtn">Login</button>
            <button class="btn btn-primary" id="navRegisterBtn">Get Started</button>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<section class="hero">
    <div class="hero-container">
        <div class="hero-badge">
            <span class="hero-badge-dot"></span>
            <span>AI-Powered Task Management</span>
        </div>
        <h1>Organize Tasks.<br><span>Get AI Insights.</span></h1>
        <p class="hero-subtitle">
            A simple, powerful todo app that helps you stay organized and provides
            intelligent summaries of your tasks using AI.
        </p>
        <div class="hero-cta">
            <button class="btn btn-primary btn-hero" id="heroRegisterBtn">Start Free</button>
            <button class="btn btn-secondary btn-hero" id="heroLoginBtn">Sign In</button>
        </div>
    </div>
</section>

<!-- Demo Section -->
<section class="demo">
    <div class="demo-container">
        <div class="section-header">
            <h2>See it in action</h2>
            <p>A clean, intuitive interface that gets out of your way.</p>
        </div>
        <div class="demo-window">
            <div class="demo-header">
                <span class="demo-dot demo-dot-red"></span>
                <span class="demo-dot demo-dot-yellow"></span>
                <span class="demo-dot demo-dot-green"></span>
            </div>
            <div class="demo-content">
                <div class="demo-todo-list">
                    <div class="demo-todo-item">
                        <div class="demo-checkbox checked">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="3">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </div>
                        <span class="demo-todo-text completed">Review project requirements</span>
                        <span class="badge badge-status-completed">Completed</span>
                    </div>
                    <div class="demo-todo-item">
                        <div class="demo-checkbox checked">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="3">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </div>
                        <span class="demo-todo-text completed">Set up development environment</span>
                        <span class="badge badge-status-completed">Completed</span>
                    </div>
                    <div class="demo-todo-item">
                        <div class="demo-checkbox"></div>
                        <span class="demo-todo-text">Build user authentication</span>
                        <span class="badge badge-priority-high">High</span>
                    </div>
                    <div class="demo-todo-item">
                        <div class="demo-checkbox"></div>
                        <span class="demo-todo-text">Design dashboard layout</span>
                        <span class="badge badge-priority-medium">Medium</span>
                    </div>
                    <div class="demo-todo-item">
                        <div class="demo-checkbox"></div>
                        <span class="demo-todo-text">Write API documentation</span>
                        <span class="badge badge-priority-low">Low</span>
                    </div>
                </div>

                <div class="demo-ai-box">
                    <div class="demo-ai-header">
                        AI Insights
                    </div>
                    <div class="demo-ai-content">
                        <strong>Great progress!</strong> You've completed 2 out of 5 tasks (40%).
                        Focus on "Build user authentication" next as it's marked high priority.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="landing-footer">
    <p th:text="'© 2026 ' + ${appName} + '. All rights reserved.'">© 2026 Todo Summarized. All rights reserved.</p>
</footer>

<!-- Auth Modals -->
<div th:replace="~{login :: modal}"></div>
<div th:replace="~{register :: modal}"></div>

<div class="toast-container" id="toastContainer"></div>

<!-- Scripts -->
<script th:src="@{/js/api.js}"></script>
<script th:src="@{/js/auth.js}"></script>
<script th:src="@{/js/utils.js}"></script>
<script th:replace="~{login :: modal-scripts}"></script>
<script th:replace="~{register :: modal-scripts}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Check if already authenticated
        if (Auth.isAuthenticated()) {
            window.location.href = '/dashboard';
            return;
        }

        // Initialize modals
        LoginModal.init();
        RegisterModal.init();

        // Nav buttons
        document.getElementById('navLoginBtn')?.addEventListener('click', () => LoginModal.open());
        document.getElementById('navRegisterBtn')?.addEventListener('click', () => RegisterModal.open());

        // Hero buttons
        document.getElementById('heroLoginBtn')?.addEventListener('click', () => LoginModal.open());
        document.getElementById('heroRegisterBtn')?.addEventListener('click', () => RegisterModal.open());

        // CTA button
        document.getElementById('ctaRegisterBtn')?.addEventListener('click', () => RegisterModal.open());

        // Check URL params for modal triggers
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('login') === 'true') {
            LoginModal.open();
        } else if (urlParams.get('register') === 'true') {
            RegisterModal.open();
        }
    });
</script>
</body>
</html>